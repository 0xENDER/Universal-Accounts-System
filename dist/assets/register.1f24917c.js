import{h as I,t as h,p as L,g as f,i as v,b,d as y,j as w,a as N,o as P,u as p,c as u,s as R,m as M,e as O,B as S,f as U,r as j,k as q,n as $}from"./index.9baaabd4.js";import{T as V}from"./Title.a581f7e6.js";import{M as A,F as T}from"./FlexContainer.d71fa80c.js";const Y=h('<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0ZM9 15v-2h2v2H9ZM9 5v6h2V5H9Z" fill="var(--svg-color)"></path></svg>'),G=(e={})=>(()=>{const l=Y.cloneNode(!0);return I(l,e,!0,!0),l})(),B=h("<div></div>"),J=h('<input placeholder=" ">'),K=h("<div><div><label></label></div></div>");function D(e){let l=L(e,f.inputFieldContainer),i,r=e.hint!=null?(()=>{const n=B.cloneNode(!0);return v(n,()=>e.hint),b(()=>y(n,`${f.inputFieldHint} text`)),n})():(()=>{const n=B.cloneNode(!0);return n.style.setProperty("display","none"),b(()=>y(n,`${f.inputFieldHint} text`)),n})(),o=(()=>{const n=J.cloneNode(!0),s=i;return typeof s=="function"?p(s,n):i=n,b(c=>{const g=e.id,d=e.type,m=e.autocomplete?e.autocomplete:"off",C=f.inputField,_=e.maxlength;return g!==c._v$&&w(n,"id",c._v$=g),d!==c._v$2&&w(n,"type",c._v$2=d),m!==c._v$3&&w(n,"autocomplete",c._v$3=m),C!==c._v$4&&y(n,c._v$4=C),_!==c._v$5&&w(n,"maxlength",c._v$5=_),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),n})(),t=!1,a=()=>{t&&(t=!1,setTimeout(function(){let n=i.getBoundingClientRect().y,s=i.clientHeight;if(window.innerHeight-n-s<175)try{let c=i.getBoundingClientRect().y-(window.innerHeight/2+s);window.scrollTo(0,window.scrollY-document.body.clientTop+(c>0?c:0)+120)}catch{i.scrollIntoView(!0)}},20))};if(N(()=>{window.addEventListener("resize",a),i.onclick=function(){t=!0}}),P(()=>{window.removeEventListener("resize",a)}),e.value&&(o.value=e.value),typeof e.id!="string")throw new Error("<Input> element must always have an ID!");if(typeof e.label!="string")throw new Error("<Input> element must always have a label!");if(e.type=="text"||e.type=="url"||e.type=="tel"||e.type=="password"||e.type=="number")return(()=>{const n=K.cloneNode(!0),s=n.firstChild,c=s.firstChild,g=e.ref;return typeof g=="function"?p(g,n):e.ref=n,v(s,o,c),v(c,()=>e.label),v(s,u(G,{get class(){return f.inputErrorIcon}}),null),v(n,r,null),b(d=>{const m=l.class,C=l.style,_=f.inputFieldDataContainer,E=f.inputFieldLabel,k=e.id;return m!==d._v$6&&y(n,d._v$6=m),d._v$7=R(n,C,d._v$7),_!==d._v$8&&y(s,d._v$8=_),E!==d._v$9&&y(c,d._v$9=E),k!==d._v$10&&w(c,"for",d._v$10=k),d},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),n})();throw new Error("Unsupported <Input> type!")}function x(e,l,i){if(l){e.classList.remove(f.invalidData),e.children[0].children[0].onchange=void 0;let r=e.children[1];r.textContent=e.dataset.hint,r.style.display=e.dataset.hintDisplay,e.removeAttribute("data-hint"),e.removeAttribute("data-hint-display")}else{if(e.classList.add(f.invalidData),typeof i=="string"){let r=e.children[1];e.hasAttribute("data-hint")||(e.dataset.hint=r.textContent,e.dataset.hintDisplay=r.style.display),r.textContent=i,r.style.display=i.replace(/\s/gi,"")!=""?null:"none"}else throw new Error("Must attach an error message!");e.children[0].children[0].onchange=function(){x(e,!0)}}}const Q=h("<div><text></text></div>");function X(e){let l=L(e,f.notice,e.smaller?f.smallerNotice:void 0);return(()=>{const i=Q.cloneNode(!0),r=i.firstChild,o=e.ref;return typeof o=="function"?p(o,i):e.ref=i,v(r,()=>e.children),b(t=>{const a=l.class,n=l.style;return a!==t._v$&&y(i,t._v$=a),t._v$2=R(i,n,t._v$2),t},{_v$:void 0,_v$2:void 0}),i})()}const W="_buttonsStickyContainer_1vcf7_13",ee="_slideIn_1vcf7_1",te={buttonsStickyContainer:W,slideIn:ee};async function ne(e){return new Promise((l,i)=>{M("/lists/banned_words.txt",function(r,o){if(r)throw r;let t=!1,a=e.toLowerCase();o=o.replace(/\r/g,"").toLowerCase().split(/\n/g),o.forEach(n=>{let s=a.indexOf(n);s!=-1&&(s+n.length<e.length&&(/^[a-z]*$/g.test(e[s+n.length-1])&&/^[A-Z]*$/g.test(e[s+n.length])||/^[A-Z]*$/g.test(e[s+n.length-1])&&/^[a-z]*$/g.test(e[s+n.length])||!/^[a-z]*$/g.test(a[s+n.length]))||e.length==s+n.length)&&(s>0?/^[a-z]*$/g.test(e[s-1])&&/^[A-Z]*$/g.test(e[s])||/^[A-Z]*$/g.test(e[s])&&/^[A-Z]*$/g.test(e[s-1])?t=!0:/^[a-z]*$/g.test(a[s-1])||(t=!0):t=!0)}),l(t)})})}const ie=h('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m12 15 .707.707-.707.707-.707-.707L12 15Zm6.707-5.293-6 6-1.414-1.414 6-6 1.414 1.414Zm-7.414 6-6-6 1.414-1.414 6 6-1.414 1.414Z" fill="var(--svg-color)"></path></svg>'),le=(e={})=>(()=>{const l=ie.cloneNode(!0);return I(l,e,!0,!0),l})(),re=h("<div></div>"),ae=h("<h1>Create a Ciel account</h1>"),se=h("<br>"),oe=h("<h3>Enter your <!> and <!>!</h3>");function Z(e){return(()=>{const l=re.cloneNode(!0);return l.style.setProperty("width","100%"),l.style.setProperty("position","relative"),l.style.setProperty("overflow","hidden"),v(l,()=>e.children),l})()}function F(e,...l){let i=[],r=[];e.setAttribute("disabled","");function o(){e.removeAttribute("disabled");for(let t=0;t<i.length;t++)if(i[t].value.replace(/\s/gi,"")==""){e.setAttribute("disabled","");break}for(let t=0;t<r.length;t++)if(r[t].selectedIndex<1){e.setAttribute("disabled","");break}}return l.forEach(function(t){let a=document.getElementById(t);if(a.tagName=="INPUT")i.push(a),a.oninput=o;else if(a.tagName=="SELECT")r.push(a),a.addEventListener("change",o);else throw new Error("Unexpected element!")}),o(),o}function z(e,l,i){let r=document.getElementById("local-content");e.setAttribute("disabled",""),r.dataset.processing=!0;let o=[!1],t=!1,a=function(){t||(t=!0,e.removeAttribute("disabled"),r.dataset.processing=!1,o[0]||i())};l(function(){o[0]=!0,a()},a,o)}function ce(e){U("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(l,i){j(),e("/user/register"),i()}]])}function H(e){let l;return N(()=>{var i=new IntersectionObserver(function(r){r[0].intersectionRatio===0?l.dataset.sticky=!0:r[0].intersectionRatio===1&&(l.dataset.sticky=!1)},{threshold:[0,1]});i.observe(l);var i=new IntersectionObserver(([r])=>l.dataset.sticky=r.intersectionRatio<1,{threshold:[1]});i.observe(l)}),u(T,{ref(i){const r=l;typeof r=="function"?r(i):l=i},get class(){return te.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return[u(le,{tabindex:0,onClick:function(){window.scrollTo(0,window.scrollY+window.innerHeight/2)}}),q(()=>e.children)]}})}function de(e){let l=O(),i,r,o;return N(()=>{$.name.first!=null&&(r.children[0].children[0].value=$.name.first),$.name.last!=null&&(o.children[0].children[0].value=$.name.last),F(i,"first_name","last_name"),e.pageLoaded()}),P(()=>{e.pageUnloading()}),[u(V,{children:"Sign Up"}),ae.cloneNode(!0),se.cloneNode(!0),(()=>{const t=oe.cloneNode(!0),a=t.firstChild,n=a.nextSibling,s=n.nextSibling,c=s.nextSibling;return c.nextSibling,v(t,u(A,{children:"first name"}),n),v(t,u(A,{children:"last name"}),c),t})(),u(T,{space:"around",style:{width:"400px"},get children(){return[u(Z,{get children(){return[u(D,{ref(t){const a=r;typeof a=="function"?a(t):r=t},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),u(D,{ref(t){const a=o;typeof a=="function"?a(t):o=t},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),u(X,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),u(H,{get children(){return[u(S,{type:"link",href:"/user/login",children:"Sign in instead"}),u(S,{ref(t){const a=i;typeof a=="function"?a(t):i=t},type:"action",function:function(){z(i,function(t,a){let n=r.children[0].children[0],s=o.children[0].children[0],c=0,g=function(){c++,c==2&&a()};[[n,r],[s,o]].forEach(function(d){/^[a-zA-Z]+$/.test(d[0].value)?ne(d[0].value).then(function(m){m&&(x(d[1],!1,"Profanity not allow!"),t()),g()}):(x(d[1],!1,"Can only contain letters!"),t())})},function(){$.name.first=r.children[0].children[0].value,$.name.last=o.children[0].children[0].value,l("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const ve=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:Z,clientDataCheck:F,nextCheck:z,redoRegister:ce,ButtonsContainer:H,default:de},Symbol.toStringTag,{value:"Module"}));export{H as B,D as I,X as N,Z as a,ve as b,F as c,z as n,ce as r,x as s,ne as t};
