import{k as p,o as h,c as a,i as g,t as c}from"./index.04f79ee0.js";import{T as y}from"./Title.a581f7e6.js";import{M as b,F as d,B as f}from"./FlexContainer.056dc28d.js";import{I as x,N as v,s as i}from"./Notice.a01be83b.js";import{I as _,n as C,r as k,c as w,a as I}from"./register.9d6d3ec2.js";const N=c("<h1>Choose a username!</h1>"),$=c("<br>"),M=c("<h3>Choose your own <!>!</h3>");function F(m){let u=p(),r,n;return h(()=>{let e=n.children[0].children[0],t=()=>{e.value.length<3||e.value.length>20?r.setAttribute("disabled",""):r.removeAttribute("disabled")};t(),e.oninput=t}),m.report(),[a(y,{children:"Sign Up"}),N.cloneNode(!0),$.cloneNode(!0),(()=>{const e=M.cloneNode(!0),t=e.firstChild,l=t.nextSibling;return l.nextSibling,g(e,a(b,{children:"username"}),l),e})(),a(d,{space:"around",style:{width:"400px"},get children(){return[a(_,{get children(){return a(x,{ref(e){const t=n;typeof t=="function"?t(e):n=e},id:"username",type:"text",label:"Username",autocomplete:"off",style:{width:"calc(100% - 8px)"},maxlength:20})}}),a(v,{children:"Your username is public, make sure it does not contain any sensitive or personal information!"}),a(d,{space:"between",horozontal:!0,"no-grow":!0,get children(){return[a(f,{type:"action",function:function(){history.back()},children:"Go back"}),a(f,{ref(e){const t=r;typeof t=="function"?t(e):r=e},type:"action",function:function(){C(r,function(e,t){let l=n.children[0].children[0],s=l.value.toLowerCase();if(!/^[A-Za-z0-9_]*$/.test(s))i(n,!1,"Can only contain letters, numbers, and underscores!"),e();else if(!/[a-zA-Z]/.test(s))i(n,!1,"Must at least contain one letter!"),e();else if(s.length<3||s.length>20)i(n,!1,"Must be at least 3 characters long, and cannot exceed 20 characters!"),e();else{var o=new XMLHttpRequest;o.open("GET","/lists/reserved_usernames.txt"),o.send(null),o.onloadend=function(){o.status===200?o.responseText.includes(s)&&(i(n,!1,"Username is reserved by the system!"),e()):(i(n,!1,"An error occured, please try again later!"),e()),t()}}},function(){k.username=n.children[0].children[0].value,w(2,function(e){e?I(u):u("/user/register/password")})})},primary:!0,children:"Next"})]}})]}})]}export{F as default};
