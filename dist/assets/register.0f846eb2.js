import{h as R,t as v,p as B,g as f,i as h,b,d as y,j as w,a as E,o as D,u as C,c as u,s as I,e as z,B as S,f as U,r as O,m as j,k as _}from"./index.f85b29b8.js";import{T as q}from"./Title.a581f7e6.js";import{M as A,F as P}from"./FlexContainer.7563198b.js";const V=v('<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0ZM9 15v-2h2v2H9ZM9 5v6h2V5H9Z" fill="var(--svg-color)"></path></svg>'),Y=(e={})=>(()=>{const i=V.cloneNode(!0);return R(i,e,!0,!0),i})(),T=v("<div></div>"),G=v('<input placeholder=" ">'),X=v("<div><div><label></label></div></div>");function L(e){let i=B(e,f.inputFieldContainer),t,l=e.hint!=null?(()=>{const r=T.cloneNode(!0);return h(r,()=>e.hint),b(()=>y(r,`${f.inputFieldHint} text`)),r})():(()=>{const r=T.cloneNode(!0);return r.style.setProperty("display","none"),b(()=>y(r,`${f.inputFieldHint} text`)),r})(),s=(()=>{const r=G.cloneNode(!0),c=t;return typeof c=="function"?C(c,r):t=r,b(a=>{const m=e.id,d=e.type,g=e.autocomplete?e.autocomplete:"off",x=f.inputField,$=e.maxlength;return m!==a._v$&&w(r,"id",a._v$=m),d!==a._v$2&&w(r,"type",a._v$2=d),g!==a._v$3&&w(r,"autocomplete",a._v$3=g),x!==a._v$4&&y(r,a._v$4=x),$!==a._v$5&&w(r,"maxlength",a._v$5=$),a},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),r})(),n=!1,o=()=>{n&&(n=!1,setTimeout(function(){let r=t.getBoundingClientRect().y,c=t.clientHeight;if(window.innerHeight-r-c<175)try{let a=t.getBoundingClientRect().y-(window.innerHeight/2+c);window.scrollTo(0,window.scrollY-document.body.clientTop+(a>0?a:0)+120)}catch{t.scrollIntoView(!0)}},20))};if(E(()=>{window.addEventListener("resize",o),t.onclick=function(){n=!0}}),D(()=>{window.removeEventListener("resize",o)}),e.value&&(s.value=e.value),typeof e.id!="string")throw new Error("<Input> element must always have an ID!");if(typeof e.label!="string")throw new Error("<Input> element must always have a label!");if(e.type=="text"||e.type=="url"||e.type=="tel"||e.type=="password"||e.type=="number")return(()=>{const r=X.cloneNode(!0),c=r.firstChild,a=c.firstChild,m=e.ref;return typeof m=="function"?C(m,r):e.ref=r,h(c,s,a),h(a,()=>e.label),h(c,u(Y,{get class(){return f.inputErrorIcon}}),null),h(r,l,null),b(d=>{const g=i.class,x=i.style,$=f.inputFieldDataContainer,N=f.inputFieldLabel,k=e.id;return g!==d._v$6&&y(r,d._v$6=g),d._v$7=I(r,x,d._v$7),$!==d._v$8&&y(c,d._v$8=$),N!==d._v$9&&y(a,d._v$9=N),k!==d._v$10&&w(a,"for",d._v$10=k),d},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),r})();throw new Error("Unsupported <Input> type!")}function p(e,i,t){if(i){e.classList.remove(f.invalidData),e.children[0].children[0].onchange=void 0;let l=e.children[1];l.textContent=e.dataset.hint,l.style.display=e.dataset.hintDisplay,e.removeAttribute("data-hint"),e.removeAttribute("data-hint-display")}else{if(e.classList.add(f.invalidData),typeof t=="string"){let l=e.children[1];e.hasAttribute("data-hint")||(e.dataset.hint=l.textContent,e.dataset.hintDisplay=l.style.display),l.textContent=t,l.style.display=t.replace(/\s/gi,"")!=""?null:"none"}else throw new Error("Must attach an error message!");e.children[0].children[0].onchange=function(){p(e,!0)}}}const J=v("<div><text></text></div>");function K(e){let i=B(e,f.notice,e.smaller?f.smallerNotice:void 0);return(()=>{const t=J.cloneNode(!0),l=t.firstChild,s=e.ref;return typeof s=="function"?C(s,t):e.ref=t,h(l,()=>e.children),b(n=>{const o=i.class,r=i.style;return o!==n._v$&&y(t,n._v$=o),n._v$2=I(t,r,n._v$2),n},{_v$:void 0,_v$2:void 0}),t})()}const Q="_buttonsStickyContainer_1vcf7_13",W="_slideIn_1vcf7_1",ee={buttonsStickyContainer:Q,slideIn:W};function te(e,i){let t=new XMLHttpRequest;t.open("GET",e),t.send(null),t.onloadend=function(){t.status===200?i(!1,t.responseText):i(new Error(`Unable to fetch file (${e})`),void 0)}}async function ne(e){return new Promise((i,t)=>{te("/lists/banned_words.txt",function(l,s){if(l)throw l;let n=!1,o=e.toLowerCase();s=s.replace(/\r/g,"").toLowerCase().split(/\n/g),s.forEach(r=>{let c=o.indexOf(r);c!=-1&&(c>0?/^[a-z]*$/g.test(e[c-1])&&/^[A-Z]*$/g.test(e[c])||/^[A-Z]*$/g.test(e[c])&&/^[A-Z]*$/g.test(e[c-1])?n=!0:/^[a-z]*$/g.test(o[c-1])||(n=!0):n=!0),s=[]}),i(n)})})}const ie=v('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m12 15 .707.707-.707.707-.707-.707L12 15Zm6.707-5.293-6 6-1.414-1.414 6-6 1.414 1.414Zm-7.414 6-6-6 1.414-1.414 6 6-1.414 1.414Z" fill="var(--svg-color)"></path></svg>'),le=(e={})=>(()=>{const i=ie.cloneNode(!0);return R(i,e,!0,!0),i})(),re=v("<div></div>"),oe=v("<h1>Create a Ciel account</h1>"),se=v("<br>"),ae=v("<h3>Enter your <!> and <!>!</h3>");function F(e){return(()=>{const i=re.cloneNode(!0);return i.style.setProperty("width","100%"),i.style.setProperty("position","relative"),i.style.setProperty("overflow","hidden"),h(i,()=>e.children),i})()}function Z(e,...i){let t=[],l=[];e.setAttribute("disabled","");function s(){e.removeAttribute("disabled");for(let n=0;n<t.length;n++)if(t[n].value.replace(/\s/gi,"")==""){e.setAttribute("disabled","");break}for(let n=0;n<l.length;n++)if(l[n].selectedIndex<1){e.setAttribute("disabled","");break}}return i.forEach(function(n){let o=document.getElementById(n);if(o.tagName=="INPUT")t.push(o),o.oninput=s;else if(o.tagName=="SELECT")l.push(o),o.addEventListener("change",s);else throw new Error("Unexpected element!")}),s(),s}function H(e,i,t){let l=document.getElementById("local-content");e.setAttribute("disabled",""),l.dataset.processing=!0;let s=[!1],n=!1,o=function(){n||(n=!0,e.removeAttribute("disabled"),l.dataset.processing=!1,s[0]||t())};i(function(){s[0]=!0,o()},o,s)}function ce(e){U("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(i,t){O(),e("/user/register"),t()}]])}function M(e){let i;return E(()=>{var t=new IntersectionObserver(function(l){l[0].intersectionRatio===0?i.dataset.sticky=!0:l[0].intersectionRatio===1&&(i.dataset.sticky=!1)},{threshold:[0,1]});t.observe(i);var t=new IntersectionObserver(([l])=>i.dataset.sticky=l.intersectionRatio<1,{threshold:[1]});t.observe(i)}),u(P,{ref(t){const l=i;typeof l=="function"?l(t):i=t},get class(){return ee.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return[u(le,{tabindex:0,onClick:function(){window.scrollTo(0,window.scrollY+window.innerHeight/2)}}),j(()=>e.children)]}})}function de(e){let i=z(),t,l,s;return E(()=>{_.name.first!=null&&(l.children[0].children[0].value=_.name.first),_.name.last!=null&&(s.children[0].children[0].value=_.name.last),Z(t,"first_name","last_name"),e.pageLoaded()}),D(()=>{e.pageUnloading()}),[u(q,{children:"Sign Up"}),oe.cloneNode(!0),se.cloneNode(!0),(()=>{const n=ae.cloneNode(!0),o=n.firstChild,r=o.nextSibling,c=r.nextSibling,a=c.nextSibling;return a.nextSibling,h(n,u(A,{children:"first name"}),r),h(n,u(A,{children:"last name"}),a),n})(),u(P,{space:"around",style:{width:"400px"},get children(){return[u(F,{get children(){return[u(L,{ref(n){const o=l;typeof o=="function"?o(n):l=n},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),u(L,{ref(n){const o=s;typeof o=="function"?o(n):s=n},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),u(K,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),u(M,{get children(){return[u(S,{type:"link",href:"/user/login",children:"Sign in instead"}),u(S,{ref(n){const o=t;typeof o=="function"?o(n):t=n},type:"action",function:function(){H(t,function(n,o){let r=l.children[0].children[0],c=s.children[0].children[0],a=0,m=function(){a++,a==2&&o()};[[r,l],[c,s]].forEach(function(d){/^[a-zA-Z]+$/.test(d[0].value)?ne(d[0].value).then(function(g){g&&(p(d[1],!1,"Profanity not allow!"),n()),m()}):(p(d[1],!1,"Can only contain letters!"),n())})},function(){_.name.first=l.children[0].children[0].value,_.name.last=s.children[0].children[0].value,i("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const he=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:F,clientDataCheck:Z,nextCheck:H,redoRegister:ce,ButtonsContainer:M,default:de},Symbol.toStringTag,{value:"Module"}));export{M as B,L as I,K as N,F as a,he as b,Z as c,te as m,H as n,ce as r,p as s,ne as t};
