import{f as w,o as x,c as s,i as h,B as p,t as c,h as C}from"./index.b2aafb49.js";import{T as I}from"./Title.a581f7e6.js";import{I as g,N as E,s as q}from"./Notice.32fec345.js";import{M as y,F as b}from"./FlexContainer.89ff3d85.js";function F(n){if(typeof CryptoJS!="object"){let r=document.createElement("script");r.onload=n,r.src="/libraries/aes.js",document.head.appendChild(r)}else n()}function z(n){return CryptoJS.MD5(n).toString()}function v(){return{name:{first:void 0,last:void 0},username:void 0,passwordHash:void 0,birthdate:{day:void 0,month:void 0,year:void 0},gender:void 0,pronounce:void 0,securityQuestions:{q1:void 0,q2:void 0,q3:void 0,a1:void 0,a2:void 0,a3:void 0},quickSettings:{profile:void 0,activity:void 0,location:void 0,colorScheme:void 0}}}let l=v();function $(){l=v()}var m={1:["name.first","name.last"],2:["username"],3:["passwordHash"],4:["birthdate.day","birthdate.month","birthdate.year","gender","pronounce"],5:["securityQuestions.q1","securityQuestions.q2","securityQuestions.q3","securityQuestions.a1","securityQuestions.a2","securityQuestions.a3"],6:["quickSettings.profile","quickSettings.activity","quickSettings.location","quickSettings.colorScheme"]},k=Object.keys(m).length;function L(n,r){if(console.log(l),n<1||n>k)throw new Error("Incorrect section ID!");let o=!1;for(var a in m)a=Number(a),a<=n&&m[Number(a)].forEach(i=>{i=i.split(".").reverse();let e=l[i.pop()];i.forEach(function(t){e=e[t]}),!o&&e==null&&(o=!0,r(!0))});o||r(!1)}const D=c("<div></div>"),B=c("<h1>Create a Ciel account</h1>"),Q=c("<br>"),j=c("<h3>Enter your <!> and <!>!</h3>");function S(n){return(()=>{const r=D.cloneNode(!0);return r.style.setProperty("width","100%"),r.style.setProperty("position","relative"),r.style.setProperty("overflow","hidden"),h(r,()=>n.children),r})()}function _(n,...r){let o=[],a=[];n.setAttribute("disabled","");function i(){n.removeAttribute("disabled");for(let e=0;e<o.length;e++)if(o[e].value.replace(/\s/gi,"")==""){n.setAttribute("disabled","");break}for(let e=0;e<a.length;e++)if(a[e].selectedIndex<1){n.setAttribute("disabled","");break}}return r.forEach(function(e){let t=document.getElementById(e);if(t.tagName=="INPUT")o.push(t),t.oninput=i;else if(t.tagName=="SELECT")a.push(t),t.addEventListener("change",i);else throw new Error("Unexpected element!")}),i(),i}function N(n,r,o){let a=document.getElementById("local-content");n.setAttribute("disabled",""),a.dataset.processing=!0;let i=[!1],e=!1,t=function(){e||(e=!0,n.removeAttribute("disabled"),a.dataset.processing=!1,i[0]||o())};r(function(){i[0]=!0,t()},t,i)}function O(n){C("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(r,o){$(),n("/user/register"),o()}]])}function A(n){let r=w(),o,a,i;return x(()=>{l.name.first!=null&&(a.children[0].children[0].value=l.name.first),l.name.last!=null&&(i.children[0].children[0].value=l.name.last),_(o,"first_name","last_name")}),n.report(),[s(I,{children:"Sign Up"}),B.cloneNode(!0),Q.cloneNode(!0),(()=>{const e=j.cloneNode(!0),t=e.firstChild,d=t.nextSibling,f=d.nextSibling,u=f.nextSibling;return u.nextSibling,h(e,s(y,{children:"first name"}),d),h(e,s(y,{children:"last name"}),u),e})(),s(b,{space:"around",style:{width:"400px"},get children(){return[s(S,{get children(){return[s(g,{ref(e){const t=a;typeof t=="function"?t(e):a=e},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),s(g,{ref(e){const t=i;typeof t=="function"?t(e):i=e},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),s(E,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),s(b,{space:"between",horozontal:!0,"no-grow":!0,get children(){return[s(p,{type:"link",href:"/user/login",children:"Sign in instead"}),s(p,{ref(e){const t=o;typeof t=="function"?t(e):o=e},type:"action",function:function(){N(o,function(e,t){let d=a.children[0].children[0],f=i.children[0].children[0];[[d,a],[f,i]].forEach(function(u){/^[a-zA-Z]+$/.test(u[0].value)||(q(u[1],!1,"Can only contain letters!"),e())}),t()},function(){l.name.first=a.children[0].children[0].value,l.name.last=i.children[0].children[0].value,r("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const U=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:S,clientDataCheck:_,nextCheck:N,redoRegister:O,default:A},Symbol.toStringTag,{value:"Module"}));export{S as I,O as a,_ as b,L as c,U as d,z as h,F as l,N as n,l as r};
