import{h as R,t as h,p as B,g as f,i as v,b,d as y,j as w,a as E,o as D,u as p,c as u,s as I,e as M,B as S,f as U,r as O,m as j,k as _}from"./index.ae87e990.js";import{T as q}from"./Title.a581f7e6.js";import{M as A,F as P}from"./FlexContainer.ea17254d.js";const V=h('<svg viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M10 0C4.48 0 0 4.48 0 10s4.48 10 10 10 10-4.48 10-10S15.52 0 10 0ZM9 15v-2h2v2H9ZM9 5v6h2V5H9Z" fill="var(--svg-color)"></path></svg>'),Y=(e={})=>(()=>{const l=V.cloneNode(!0);return R(l,e,!0,!0),l})(),T=h("<div></div>"),G=h('<input placeholder=" ">'),X=h("<div><div><label></label></div></div>");function L(e){let l=B(e,f.inputFieldContainer),t,r=e.hint!=null?(()=>{const i=T.cloneNode(!0);return v(i,()=>e.hint),b(()=>y(i,`${f.inputFieldHint} text`)),i})():(()=>{const i=T.cloneNode(!0);return i.style.setProperty("display","none"),b(()=>y(i,`${f.inputFieldHint} text`)),i})(),a=(()=>{const i=G.cloneNode(!0),s=t;return typeof s=="function"?p(s,i):t=i,b(c=>{const g=e.id,d=e.type,m=e.autocomplete?e.autocomplete:"off",C=f.inputField,$=e.maxlength;return g!==c._v$&&w(i,"id",c._v$=g),d!==c._v$2&&w(i,"type",c._v$2=d),m!==c._v$3&&w(i,"autocomplete",c._v$3=m),C!==c._v$4&&y(i,c._v$4=C),$!==c._v$5&&w(i,"maxlength",c._v$5=$),c},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0,_v$5:void 0}),i})(),n=!1,o=()=>{n&&(n=!1,setTimeout(function(){let i=t.getBoundingClientRect().y,s=t.clientHeight;if(window.innerHeight-i-s<175)try{let c=t.getBoundingClientRect().y-(window.innerHeight/2+s);window.scrollTo(0,window.scrollY-document.body.clientTop+(c>0?c:0)+120)}catch{t.scrollIntoView(!0)}},20))};if(E(()=>{window.addEventListener("resize",o),t.onclick=function(){n=!0}}),D(()=>{window.removeEventListener("resize",o)}),e.value&&(a.value=e.value),typeof e.id!="string")throw new Error("<Input> element must always have an ID!");if(typeof e.label!="string")throw new Error("<Input> element must always have a label!");if(e.type=="text"||e.type=="url"||e.type=="tel"||e.type=="password"||e.type=="number")return(()=>{const i=X.cloneNode(!0),s=i.firstChild,c=s.firstChild,g=e.ref;return typeof g=="function"?p(g,i):e.ref=i,v(s,a,c),v(c,()=>e.label),v(s,u(Y,{get class(){return f.inputErrorIcon}}),null),v(i,r,null),b(d=>{const m=l.class,C=l.style,$=f.inputFieldDataContainer,N=f.inputFieldLabel,k=e.id;return m!==d._v$6&&y(i,d._v$6=m),d._v$7=I(i,C,d._v$7),$!==d._v$8&&y(s,d._v$8=$),N!==d._v$9&&y(c,d._v$9=N),k!==d._v$10&&w(c,"for",d._v$10=k),d},{_v$6:void 0,_v$7:void 0,_v$8:void 0,_v$9:void 0,_v$10:void 0}),i})();throw new Error("Unsupported <Input> type!")}function x(e,l,t){if(l){e.classList.remove(f.invalidData),e.children[0].children[0].onchange=void 0;let r=e.children[1];r.textContent=e.dataset.hint,r.style.display=e.dataset.hintDisplay,e.removeAttribute("data-hint"),e.removeAttribute("data-hint-display")}else{if(e.classList.add(f.invalidData),typeof t=="string"){let r=e.children[1];e.hasAttribute("data-hint")||(e.dataset.hint=r.textContent,e.dataset.hintDisplay=r.style.display),r.textContent=t,r.style.display=t.replace(/\s/gi,"")!=""?null:"none"}else throw new Error("Must attach an error message!");e.children[0].children[0].onchange=function(){x(e,!0)}}}const J=h("<div><text></text></div>");function K(e){let l=B(e,f.notice,e.smaller?f.smallerNotice:void 0);return(()=>{const t=J.cloneNode(!0),r=t.firstChild,a=e.ref;return typeof a=="function"?p(a,t):e.ref=t,v(r,()=>e.children),b(n=>{const o=l.class,i=l.style;return o!==n._v$&&y(t,n._v$=o),n._v$2=I(t,i,n._v$2),n},{_v$:void 0,_v$2:void 0}),t})()}const Q="_buttonsStickyContainer_1vcf7_13",W="_slideIn_1vcf7_1",ee={buttonsStickyContainer:Q,slideIn:W};function te(e,l){let t=new XMLHttpRequest;t.open("GET",e),t.send(null),t.onloadend=function(){t.status===200?l(!1,t.responseText):l(new Error(`Unable to fetch file (${e})`),void 0)}}async function ne(e){return new Promise((l,t)=>{te("/lists/banned_words.txt",function(r,a){if(r)throw r;let n=!1,o=e.toLowerCase();a=a.replace(/\r/g,"").toLowerCase().split(/\n/g),a.forEach(i=>{let s=o.indexOf(i);s!=-1&&(s+i.length<e.length&&(/^[a-z]*$/g.test(e[s+i.length-1])&&/^[A-Z]*$/g.test(e[s+i.length])||!/^[a-z]*$/g.test(o[s+i.length]))||e.length==s+i.length)&&(s>0?/^[a-z]*$/g.test(e[s-1])&&/^[A-Z]*$/g.test(e[s])||/^[A-Z]*$/g.test(e[s])&&/^[A-Z]*$/g.test(e[s-1])?n=!0:/^[a-z]*$/g.test(o[s-1])||(n=!0):n=!0)}),l(n)})})}const ie=h('<svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="m12 15 .707.707-.707.707-.707-.707L12 15Zm6.707-5.293-6 6-1.414-1.414 6-6 1.414 1.414Zm-7.414 6-6-6 1.414-1.414 6 6-1.414 1.414Z" fill="var(--svg-color)"></path></svg>'),le=(e={})=>(()=>{const l=ie.cloneNode(!0);return R(l,e,!0,!0),l})(),re=h("<div></div>"),oe=h("<h1>Create a Ciel account</h1>"),se=h("<br>"),ae=h("<h3>Enter your <!> and <!>!</h3>");function F(e){return(()=>{const l=re.cloneNode(!0);return l.style.setProperty("width","100%"),l.style.setProperty("position","relative"),l.style.setProperty("overflow","hidden"),v(l,()=>e.children),l})()}function Z(e,...l){let t=[],r=[];e.setAttribute("disabled","");function a(){e.removeAttribute("disabled");for(let n=0;n<t.length;n++)if(t[n].value.replace(/\s/gi,"")==""){e.setAttribute("disabled","");break}for(let n=0;n<r.length;n++)if(r[n].selectedIndex<1){e.setAttribute("disabled","");break}}return l.forEach(function(n){let o=document.getElementById(n);if(o.tagName=="INPUT")t.push(o),o.oninput=a;else if(o.tagName=="SELECT")r.push(o),o.addEventListener("change",a);else throw new Error("Unexpected element!")}),a(),a}function z(e,l,t){let r=document.getElementById("local-content");e.setAttribute("disabled",""),r.dataset.processing=!0;let a=[!1],n=!1,o=function(){n||(n=!0,e.removeAttribute("disabled"),r.dataset.processing=!1,a[0]||t())};l(function(){a[0]=!0,o()},o,a)}function ce(e){U("Something went wrong!","It looks like some of your registration data is missing!",[["Refill info",function(l,t){O(),e("/user/register"),t()}]])}function H(e){let l;return E(()=>{var t=new IntersectionObserver(function(r){r[0].intersectionRatio===0?l.dataset.sticky=!0:r[0].intersectionRatio===1&&(l.dataset.sticky=!1)},{threshold:[0,1]});t.observe(l);var t=new IntersectionObserver(([r])=>l.dataset.sticky=r.intersectionRatio<1,{threshold:[1]});t.observe(l)}),u(P,{ref(t){const r=l;typeof r=="function"?r(t):l=t},get class(){return ee.buttonsStickyContainer},space:"between",horozontal:!0,"no-grow":!0,get children(){return[u(le,{tabindex:0,onClick:function(){window.scrollTo(0,window.scrollY+window.innerHeight/2)}}),j(()=>e.children)]}})}function de(e){let l=M(),t,r,a;return E(()=>{_.name.first!=null&&(r.children[0].children[0].value=_.name.first),_.name.last!=null&&(a.children[0].children[0].value=_.name.last),Z(t,"first_name","last_name"),e.pageLoaded()}),D(()=>{e.pageUnloading()}),[u(q,{children:"Sign Up"}),oe.cloneNode(!0),se.cloneNode(!0),(()=>{const n=ae.cloneNode(!0),o=n.firstChild,i=o.nextSibling,s=i.nextSibling,c=s.nextSibling;return c.nextSibling,v(n,u(A,{children:"first name"}),i),v(n,u(A,{children:"last name"}),c),n})(),u(P,{space:"around",style:{width:"400px"},get children(){return[u(F,{get children(){return[u(L,{ref(n){const o=r;typeof o=="function"?o(n):r=n},id:"first_name",type:"text",label:"First name",autocomplete:"given-name",style:{width:"calc(100% - 8px)"}}),u(L,{ref(n){const o=a;typeof o=="function"?o(n):a=n},id:"last_name",type:"text",label:"Last name",autocomplete:"family-name",style:{width:"calc(100% - 8px)"}})]}}),u(K,{children:"It's recommended to use a device that you own and use frequently to create your Ciel account!"}),u(H,{get children(){return[u(S,{type:"link",href:"/user/login",children:"Sign in instead"}),u(S,{ref(n){const o=t;typeof o=="function"?o(n):t=n},type:"action",function:function(){z(t,function(n,o){let i=r.children[0].children[0],s=a.children[0].children[0],c=0,g=function(){c++,c==2&&o()};[[i,r],[s,a]].forEach(function(d){/^[a-zA-Z]+$/.test(d[0].value)?ne(d[0].value).then(function(m){m&&(x(d[1],!1,"Profanity not allow!"),n()),g()}):(x(d[1],!1,"Can only contain letters!"),n())})},function(){_.name.first=r.children[0].children[0].value,_.name.last=a.children[0].children[0].value,l("/user/register/username")})},primary:!0,children:"Next"})]}})]}})]}const ve=Object.freeze(Object.defineProperty({__proto__:null,InputFieldsContainer:F,clientDataCheck:Z,nextCheck:z,redoRegister:ce,ButtonsContainer:H,default:de},Symbol.toStringTag,{value:"Module"}));export{H as B,L as I,K as N,F as a,ve as b,Z as c,te as m,z as n,ce as r,x as s,ne as t};
