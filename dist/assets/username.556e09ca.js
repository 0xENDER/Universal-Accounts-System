import{k as p,o as m,c as a,i as h,t as i}from"./index.434d493f.js";import{T as g}from"./Title.a581f7e6.js";import{M as v,F as u,B as c}from"./FlexContainer.5e5d4d1d.js";import{I as b,N as y,s as l}from"./Notice.4cf9ac25.js";import{InputFieldsContainer as x,nextCheck as _}from"./register.6c724dfe.js";const C=i("<h1>Choose a username!</h1>"),k=i("<br>"),w=i("<h3>Choose your own <!>!</h3>");function S(d){let f=p(),s,n;return m(()=>{let e=n.children[0].children[0],t=()=>{e.value.length<3||e.value.length>20?s.setAttribute("disabled",""):s.removeAttribute("disabled")};t(),e.oninput=t}),d.report(),[a(g,{children:"Sign Up"}),C.cloneNode(!0),k.cloneNode(!0),(()=>{const e=w.cloneNode(!0),t=e.firstChild,r=t.nextSibling;return r.nextSibling,h(e,a(v,{children:"username"}),r),e})(),a(u,{space:"around",style:{width:"400px"},get children(){return[a(x,{get children(){return a(b,{ref(e){const t=n;typeof t=="function"?t(e):n=e},id:"username",type:"text",label:"Username",autocomplete:"off",style:{width:"calc(100% - 8px)"},maxlength:20})}}),a(y,{children:"Your username is public, make sure it does not contain any sensitive or personal information!"}),a(u,{space:"between",horozontal:!0,"no-grow":!0,get children(){return[a(c,{type:"action",function:function(){history.back()},children:"Go back"}),a(c,{ref(e){const t=s;typeof t=="function"?t(e):s=e},type:"action",function:function(){_(s,function(e,t){let r=n.children[0].children[0];if(!/^[A-Za-z0-9_]*$/.test(r.value))l(n,!1,"Can only contain letters, numbers, and underscores!"),e();else if(!/[a-zA-Z]/.test(r.value))l(n,!1,"Must at least contain one letter!"),e();else if(r.value.length<3||r.value.length>20)l(n,!1,"Must be at least 3 characters long, and cannot exceed 20 characters!"),e();else{var o=new XMLHttpRequest;o.open("GET","/lists/reserved_usernames.txt"),o.send(null),o.onloadend=function(){o.status===200?o.responseText.includes(r.value)&&(l(n,!1,"Username is reserved by the system!"),e()):(l(n,!1,"An error occured, please try again later!"),e()),t()}}},function(){f("/user/register/password")})},primary:!0,children:"Next"})]}})]}})]}export{S as default};
