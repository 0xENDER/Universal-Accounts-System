import{k as B,o as Y,c as o,i as F,t as n}from"./index.edd73423.js";import{T as S}from"./Title.a581f7e6.js";import{M as G,F as b,B as x}from"./FlexContainer.c78efd27.js";import{I as N,N as C,s as r}from"./Notice.7eb41843.js";import{S as _}from"./Select.e51f4333.js";import{b as L,I as O,n as P,s as z,r as i,c as A,a as J}from"./register.f2514c0a.js";const R=n("<h1>Let's get personal!</h1>"),T=n("<br>"),q=n("<h3>Enter your <!>!</h3>"),U=n('<option value="1">January</option>'),V=n('<option value="2">February</option>'),Z=n('<option value="3">March</option>'),j=n('<option value="4">April</option>'),H=n('<option value="5">May</option>'),K=n('<option value="6">June</option>'),Q=n('<option value="7">July</option>'),W=n('<option value="8">August</option>'),X=n('<option value="9">September</option>'),E=n('<option value="10">October</option>'),ee=n('<option value="11">November</option>'),te=n('<option value="12">December</option>'),ne=n('<option value="male">Male</option>'),oe=n('<option value="female">Female</option>'),le=n('<option value="unknown">Prefer not to say</option>'),ae=n('<option value="custom">Custom</option>'),re=n('<option value="1">he/him</option>'),ie=n('<option value="2">she/her</option>'),ue=n('<option value="0">they/them</option>');function ye(M){let I=B(),f,u,h,c,y,a,d;return Y(()=>{L(f,"birthday_month","birthday_day","birthday_year","gender","custom-gender-name","custom-gender-pronouns")}),M.report(),[o(S,{children:"Sign Up"}),R.cloneNode(!0),T.cloneNode(!0),(()=>{const e=q.cloneNode(!0),t=e.firstChild,v=t.nextSibling;return v.nextSibling,F(e,o(G,{children:"personal details"}),v),e})(),o(b,{space:"around",style:{width:"400px"},get children(){return[o(O,{get children(){return[o(b,{horozontal:!0,style:{margin:0},get children(){return[o(_,{ref(e){const t=h;typeof t=="function"?t(e):h=e},id:"birthday_month",label:"Month",style:{"min-width":"40%","margin-bottom":"auto"},get children(){return[U.cloneNode(!0),V.cloneNode(!0),Z.cloneNode(!0),j.cloneNode(!0),H.cloneNode(!0),K.cloneNode(!0),Q.cloneNode(!0),W.cloneNode(!0),X.cloneNode(!0),E.cloneNode(!0),ee.cloneNode(!0),te.cloneNode(!0)]}}),o(N,{ref(e){const t=u;typeof t=="function"?t(e):u=e},id:"birthday_day",type:"number",label:"Day",autocomplete:"bday-day",style:{"margin-bottom":"auto"}}),o(N,{ref(e){const t=c;typeof t=="function"?t(e):c=e},id:"birthday_year",type:"number",label:"Year",autocomplete:"bday-year",style:{"margin-bottom":"auto","min-width":"calc(28% + 8px)"}})]}}),o(C,{smaller:!0,children:"Enter your birthday"}),o(_,{ref(e){const t=y;typeof t=="function"?t(e):y=e},id:"gender",label:"Gender",style:{width:"calc(100% - 8px)"},onChange:function(){document.getElementById("gender").value!="custom"?d.style.display!="none"&&(d.style.display="none",a.style.display="none",document.getElementById("custom-gender-pronouns").selectedIndex=1,document.getElementById("custom-gender-name").value="FILL"):(document.getElementById("custom-gender-pronouns").selectedIndex=0,document.getElementById("custom-gender-name").value="",d.style.display=null,a.style.display=null)},get children(){return[ne.cloneNode(!0),oe.cloneNode(!0),le.cloneNode(!0),ae.cloneNode(!0)]}}),o(N,{ref(e){const t=a;typeof t=="function"?t(e):a=e},id:"custom-gender-name",type:"text",label:"Gender name",style:{width:"calc(100% - 8px)",display:"none"},value:"FILL"}),o(_,{ref(e){const t=d;typeof t=="function"?t(e):d=e},id:"custom-gender-pronouns",label:"Prefered pronouns",style:{width:"calc(100% - 8px)",display:"none"},selectedIndex:1,get children(){return[re.cloneNode(!0),ie.cloneNode(!0),ue.cloneNode(!0)]}})]}}),o(C,{children:"Make sure to use your real date of birth. You can create a Ciel account as long as you are 13+ years old! (access to external services will be limited depending on your age)"}),o(b,{space:"between",horozontal:!0,"no-grow":!0,get children(){return[o(x,{type:"action",function:function(){history.back()},children:"Go back"}),o(x,{ref(e){const t=f;typeof t=="function"?t(e):f=e},type:"action",function:function(){P(f,function(e,t,v){let s=u.children[0].children[0],g=c.children[0].children[0],l=h.children[0].children[0],D=y.children[0].children[0],p=a.children[0].children[0],$=new Date().getFullYear();if((Number(g.value)<$-120||Number(g.value)>$)&&(r(c,!1,"Invalid year!"),e()),Number(s.value)<1||Number(s.value)>31)r(u,!1,"Invalid day!"),e();else if(l.value=="1"||l.value=="3"||l.value=="5"||l.value=="7"||l.value=="8"||l.value=="10"||l.value=="12")Number(s.value)>31&&(r(u,!1,"Invalid day!"),e());else if(l.value=="4"||l.value=="6"||l.value=="9"||l.value=="11")Number(s.value)>30&&(r(u,!1,"Invalid day!"),e());else{let m=Number(g.value),w=m%4==0&&m%100!=0||m%400==0?29:28;Number(s.value)>w&&(r(u,!1,"Invalid day!"),e())}if(!v[0]){let m=new Date-new Date(`${g.value}-${l.value}-${s.value}`);Math.floor(m/1e3/60/60/24/365)<13&&(z("Cannot create an account!","You cannot use Ciel or any of its affiliated services when you're under the age of 13.",[["Ok",function(ce,k){r(c,!1,""),k()}]]),e())}D.value=="custom"&&(/^[a-zA-Z\s]+$/.test(p.value)?p.value[0]==" "||p.value[p.value.length-1]==" "?(r(a,!1,"Can't start or end with whitespace!"),e()):p.value.indexOf("  ")!=-1&&(r(a,!1,"Can't contain consecutive whitespaces!"),e()):(r(a,!1,"Can only contain letters and whitespaces!"),e())),t()},function(){i.birthdate.day=Number(u.children[0].children[0].value),i.birthdate.month=Number(h.children[0].children[0].value),i.birthdate.year=Number(c.children[0].children[0].value);let e=y.children[0].children[0].value;e=="custom"?(i.gender=a.children[0].children[0].value,i.pronounce=Number(d.children[0].children[0].value)):(i.gender=e,e=="male"?i.pronounce=1:e=="female"?i.pronounce=2:i.pronounce=0),A(4,function(t){t?J(I):I("/user/register/security-questions")})})},primary:!0,children:"Next"})]}})]}})]}export{ye as default};
